{% extends 'base.html' %}

{% block title %} {% endblock %}

 <script>

        {% block jquery %}
        function update_iframe_size(){

            var parent_id = $("iframe").parent().attr("id");
            if(parent_id == "main_video"){
                var parent_class = $("iframe").parent().attr("class");
                var parent_width = $("iframe").parent().width();
                console.log(parent_class);
                var width = $("iframe").css("width");
                var height = $("iframe").css("height");
                var ratio = parseInt(height)/parseInt(width);
                var new_height = parseInt(parent_width) * ratio

                $("iframe").css("width", parent_width);
                $("iframe").css("height", new_height);
            }
        }
            update_iframe_size();
            $(window).bind("resize", function(){

                update_iframe_size();
            });
        {% endblock %}
</script>


{% block content %}

<!--if you wanted to change the size of the video change class of div to col-sm-* etc-->
<div class="col-sm-12" id = "main_video">
{{ obj.embed_code|safe }}
</div>

<br/>

<a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u={{ obj.get_share_link }}">
<i class="fa fa-facebook-official fa-3x"></i>
</a>

<a target="_blank" href="https://twitter.com/home?status={{ obj.get_share_message|safe }}"><i class="fa fa-twitter-square fa-3x"></i></a>

<a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url={{ obj.get_share_link }}&title={{ obj.get_share_message|safe }}&summary={{ obj.get_share_message|safe }}&source={{ obj.get_share_link }}">
<i class="fa fa-linkedin-square fa-3x"></i>
</a>

<br/>
<hr/>
<div class="row">
    <div class="col-sm-12">
        <h1>Comments/Questions</h1>
        <form method="POST" action="">{% csrf_token %}
            {{ comment_form.as_p }}
            <input type="submit" value="Add comment"/>
        </form>
        <table class="table">
        {% for comment in comments %}
            <tr><td>{{ comment.get_comment }}
                <br/><small>via {{ comment.user }} | {{ comment.timestamp|timesince }} ago</small>
                {% if not  comment.is_child %}
            <ul>
                {% for child in comment.get_children %}
                <li>{{ child.get_comment }} <small>via {{ child.user}}</small></li>
                {% endfor %}
            </ul>
                {% endif %}
            </td></tr>
        {% endfor %}
        </table>
    </div>
</div>
{% endblock %}